{"version":3,"file":"static/js/385.262ef951.chunk.js","mappings":"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","sources":["components/register/Register.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n// import { faEnvelope } from '@fortawesome/free-regular-svg-icons';\nimport { faUnlockAlt, faEnvelope, faKey, faArrowRight, faCaretRight, faUser, faCampground, faCheckDouble } from '@fortawesome/free-solid-svg-icons';\n\nimport { Link, useNavigate } from \"react-router-dom\";\n\nimport './RegisterStyle.css'\n\nimport { useForm, useWatch } from 'react-hook-form'\n\nimport axios from 'axios';\n\nimport { MyContextSearch, useMyContextSearch } from '../../hooks/useContext/InputSearch';\n\nconst Register = (props) => {\n\n    // const { onLogin, loginAlert, role, msgReg, setMsgReg } = props;\n    // const [memberEmail, setMemberEmail] = useState(\"\");\n    // const [memberPassword, setMemberPassword] = useState(\"\");\n\n    // 全域引入的 登入 點擊後會存放全域 輸入的值\n    const { loginStatus, setLoginStatus } = useMyContextSearch(MyContextSearch);\n\n\n    // 一定要這段\n    const navigate = useNavigate();\n\n\n    // 使用的哪些方法\n    const {\n        watch,\n        register,\n        handleSubmit,\n        formState: { errors }\n    } = useForm()\n\n\n\n\n    useEffect(() => {\n        if (loginStatus === true) {\n            navigate('/')\n            return\n        }\n\n\n    \n\n    }, []);\n\n\n    // // 監控二次密碼和第一次輸入相同 監控第一個輸入欄位的值到 錯誤訊息處測試 下面是失敗的\n    const password = watch('register_password');\n\n    // // 監控二次密碼和第一次輸入相同\n    // const password = watch('member_password'); // 監控第一個輸入欄位的值\n    // const checkPassword = watch('member_checkpassword'); // 監控第二個輸入欄位\n\n    // // 當第二個輸入欄位的值改變時進行檢查\n    // useWatch({\n    //     name: 'member_checkpassword',\n    //     onChange: () => {\n    //         if (checkPassword !== password) {\n    //             // 密碼不一致，請重新輸入\n    //         }\n    //     },\n    // });\n\n    // const password = watch('member_password');\n\n    // const checkPasswordMatch = (value) => {\n    //     if (value !== password) {\n    //         return '两次输入的密码不一致';\n    //     }\n    // };\n\n\n\n\n\n\n\n    // post/register\n    // post/signup\n    // post/users\n    // 註冊的依照需要的欄位做要求\n\n    const onSubmit = (data) => {\n        // 輸入後彈現導向\n        // 有抓取物件再轉換 頁面\n        console.log(data);\n        let formdata = JSON.stringify(data)\n        console.log(formdata);\n\n        axios.post(`http://localhost:3000/users`, {\n\n            \"name\": `${data.register_name}`,\n            \"nickname\": `${data.register_nickname}`,\n            \"email\": `${data.register_email}`,\n            \"password\": `${data.register_checkpassword}`,\n            \"discount\": [0.6],\n            // \"renege\": 0  本來想再增加未履約項目 想到我並沒有做出營主管理頁 這就可有可無了\n\n        })\n            .then(function (response) {\n                console.log(response.data)\n\n                console.log(response.data.accessToken)\n                console.log(response.data.user)\n\n                localStorage.setItem('token', response.data.accessToken);\n                localStorage.setItem('name', response.data.user.name);\n                localStorage.setItem('nickname', response.data.user.nickname);\n                localStorage.setItem('id', response.data.user.id);\n\n\n\n\n\n                if (localStorage.getItem('prevpage')) {\n\n                    setLoginStatus(true)\n\n                    let id = localStorage.getItem('prevpage');\n                    alert('註冊成功,將導向至先前頁面')\n                    navigate(`/page/${id}`)\n                    localStorage.removeItem('prevpage');\n                }\n\n                else {\n\n                    setLoginStatus(true)\n\n                    alert('註冊成功,將導向至會員頁面')\n                    navigate(\"/member\")\n                }\n\n\n\n\n            })\n            .catch(function (error) {\n                console.log(error.response)\n                alert(`註冊失敗：${error.response.data}`)\n            })\n\n    }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    // const hint = () => {\n    //     if (loginAlert === '') {\n    //         return\n    //     } else if (loginAlert === '登入成功') {\n    //         return\n    //     } else {\n    //         return (\n    //             <div className=\"alert alert-warning\" role=\"alert\">\n    //                 {loginAlert}\n    //             </div>\n    //         )\n    //     }\n    // }\n\n\n\n\n\n\n    return (\n        <>\n\n\n            {/* 測試有回傳 */}\n            {/* <button onClick={() => { signupApi() }}>555</button> */}\n\n\n            {/* <!-- login_page --> */}\n            <div className=\"h-screen container relative\">\n\n                <div className='h-full flex justify-center items-center'>\n\n\n                    <div className=\"bg-soft_color w-7/12 p-0 rounded shadow-lg py-5  \" >\n                        {/* style={{ backgroundColor: \"#dfe2dd\" }} */}\n\n\n                        {/* <div> 預備放個露營縮圖 </div> */}\n\n                        <div className=\"py-5\">\n                            <h2 className=\"font-bold text-xl text-my_green\" style={{ letterSpacing: 1 }}>會員註冊</h2>\n                            \n                            <p className=\"mt-3 font-bold text-sm text-red-400\">首次註冊成功送六折優惠券</p>\n                        </div>\n\n\n\n                        <hr className=\"bg-my_green h-[1px] w-8/12 mx-auto\" style={{ border: 'none' }} />\n\n\n                        {/* 帳號密碼區塊 */}\n                        <div className=\"py-5\">\n\n                            <form onSubmit={handleSubmit(onSubmit)}>\n\n                                <div className=\"flex  justify-center py-2\">\n\n                                    <div className='flex items-center px-5 bg-sub_color'>\n                                        <FontAwesomeIcon icon={faUser} className=\" text-white\" />\n                                    </div>\n\n                                    <div>\n                                        <input className=\"border-transparent\" type=\"text\" placeholder=\"請輸入姓名\"  {...register('register_name', {\n                                            required: { value: true, message: '此欄位必填寫' },\n                                            pattern: {\n                                                value: /^(?!\\s)([\\u4e00-\\u9fa5]{2,16}|[a-zA-Z]{2,16})(?!\\s)$/g,\n                                                message: '不可混用之中文或英文，2-16字，不可帶空格及符號'\n                                            }\n                                        })} style={{ letterSpacing: 1 }} />\n                                        {/* required */}\n                                    </div>\n                                </div>\n\n                                <div className=\"min-h-[20px] font-semibold text-sm text-red-500\">\n                                    {errors.register_name?.message}\n                                    {/* {errors.register_name && <span>此欄位必填</span>} */}\n                                </div>\n\n\n\n                                <div className=\"flex justify-center py-2\">\n\n                                    <div className='flex items-center px-5 bg-sub_color'>\n                                        <FontAwesomeIcon icon={faCampground} className=\" text-white\" />\n                                    </div>\n\n                                    <div>\n                                        <input className=\"border-transparent\" type=\"text\" placeholder=\"請輸入暱稱\" {...register('register_nickname', {\n                                            required: { value: true, message: '此欄位必填寫' },\n                                            pattern: {\n                                                value: /^(?!\\s)([\\u4e00-\\u9fa5]{2,10}|[a-zA-Z]{2,10})(?!\\s)$/g,\n                                                message: '不可混用之中文或英文，2-10字，不可帶空格及符號'\n                                            }\n                                        })} style={{ letterSpacing: 1 }} />\n                                        {/* required */}\n                                    </div>\n\n                                </div>\n                                <div className=\"min-h-[20px] font-semibold text-sm text-red-500\">\n                                    {errors.register_nickname?.message}\n                                    {/* {errors.register_nickname && <span>此欄位必填</span>} */}\n                                </div>\n\n\n\n                                <div className=\"flex justify-center py-2\">\n\n                                    <div className='flex items-center px-5 bg-sub_color'>\n                                        <FontAwesomeIcon icon={faEnvelope} className=\" text-white\" />\n                                    </div>\n\n                                    <div>\n                                        <input className=\"border-transparent\" type=\"text\" placeholder=\"請輸入信箱\" {...register('register_email', {\n                                            required: { value: true, message: '此欄位必填寫' },\n                                            pattern: {\n                                                value: /^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/g,\n                                                message: 'Email 不合規則'\n                                            }\n                                        })} style={{ letterSpacing: 1 }} />\n                                        {/* required */}\n\n                                    </div>\n                                </div>\n\n                                <div className=\"min-h-[20px] font-semibold text-sm text-red-500\">\n                                    {errors.register_email?.message}\n                                </div>\n\n\n\n\n                                <div className=\"flex justify-center py-2\">\n\n                                    <div className='flex items-center px-5 bg-sub_color'>\n                                        <FontAwesomeIcon icon={faKey} className=\" text-white\" />\n                                    </div>\n\n\n                                    {/* 8-16個字符，至少1個大寫字母，1個小寫字母和1個數字，其他可以是任意字符 */}\n                                    <div>\n                                        <input id=\"input_password\" className=\"border-transparent\" type=\"password\" placeholder=\"請輸入密碼\" {...register('register_password', {\n                                            required: { value: true, message: '此欄位必填寫' },\n                                            pattern: {\n                                                value: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[^]{8,16}$/g,\n                                                message: '密碼 8-16字，至少1大寫字母，1小寫字母，1數字'\n                                            }\n                                        })} style={{ letterSpacing: 1 }} />\n                                        {/* required */}\n                                    </div>\n\n                                </div>\n                                <div className=\"min-h-[20px] font-semibold text-sm text-red-500\">\n                                    {errors.register_password?.message}\n                                    {/* {errors.register_password && <span>此欄位必填</span>} */}\n                                </div>\n\n\n\n                                <div className=\"flex justify-center py-2\">\n\n                                    <div className='flex items-center px-5 bg-sub_color'>\n                                        <FontAwesomeIcon icon={faCheckDouble} className=\" text-white\" />\n                                    </div>\n\n                                    <div>\n                                        <input id=\"input_repassword\" className=\"border-transparent\" type=\"password\" placeholder=\"再確認密碼\" {...register('register_checkpassword', { required: true, maxLength: 20, validate: value => value === password })} style={{ letterSpacing: 1 }} />\n                                        {/* required */}\n                                    </div>\n                                </div>\n\n                                <div className=\"min-h-[20px] font-semibold text-sm text-red-500\">\n                                    {/* {errors.register_checkpassword && <span>此欄位必填</span>} */}\n                                    {errors.register_checkpassword && <span>密碼不相符</span>}\n                                </div>\n\n\n\n                                {/* 點擊註冊會帶上hook form的物件 與資料庫內的信箱比對 api內是否有重複註冊 沒有重複才顯示成功且寫入 */}\n\n                                <div className=\"flex justify-center py-5\">\n\n\n\n                                    {/* onLogin(memberEmail, memberPassword) */}\n                                    <button type=\"\" className=\"font-bold text-my_green button_effect\" onClick={() => { console.log('註冊') }}\n                                        style={{ fontSize: 18 }}>註 冊</button>\n\n                                </div>\n\n\n                                <hr className=\"bg-my_green h-[1px] w-8/12 mx-auto\" style={{ border: 'none' }} />\n\n                                <div className=\"flex justify-center py-5\">\n\n                                    <strong className=\"\">按錯了\n                                        <span className='text-sub_color mx-1'>我要回前頁</span>阿！\n                                    </strong>\n\n                                    <div className=\"px-3\">\n                                        <Link to=\"/login\" className=\"text-sub_color hover:text-my_green font-bold\" >\n                                            現在去登入\n                                            <FontAwesomeIcon icon={faCaretRight} className=\" text-black\" />\n                                        </Link>\n                                    </div>\n\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n            {/* <!-- 登入頁面到此 --> */}\n        </ >\n    );\n\n\n\n\n}\n\nexport default Register;\n// 匯出這個函式功能"],"names":["props","_errors$register_name","_errors$register_nick","_errors$register_emai","_errors$register_pass","_useMyContextSearch","useMyContextSearch","MyContextSearch","loginStatus","setLoginStatus","navigate","useNavigate","_useForm","useForm","watch","register","handleSubmit","errors","formState","useEffect","password","_jsx","_Fragment","children","className","_jsxs","style","letterSpacing","border","onSubmit","data","console","log","formdata","JSON","stringify","axios","concat","register_name","register_nickname","register_email","register_checkpassword","then","response","accessToken","user","localStorage","setItem","name","nickname","id","getItem","alert","removeItem","catch","error","FontAwesomeIcon","icon","faUser","_objectSpread","type","placeholder","required","value","message","pattern","faCampground","faEnvelope","faKey","register_password","faCheckDouble","maxLength","validate","onClick","fontSize","Link","to","faCaretRight"],"sourceRoot":""}