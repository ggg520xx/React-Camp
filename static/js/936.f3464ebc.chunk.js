"use strict";(self.webpackChunkreactapp=self.webpackChunkreactapp||[]).push([[936],{7698:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var r=n(9439),o=n(2791),s=n(9414),l=n(9822),c=n(1243),a=n(1413),i=n(4165),d=n(5861),m=n(3433),u=n(1087),x=n(9342),p=n(9806),h=n(1632),g=(n(3971),n(1830)),f=n.n(g),b=n(184),v=function(e){var t=e.sortItem,s=e.num,l=e.conCollect,g=e.setCollect,v=e.likeArray,y=e.userId;console.log(t),console.log(s);var j=t.filter((function(e){return e.areaId===s}));console.log(j);var N=(0,o.useState)(null),w=(0,r.Z)(N,2),k=w[0],_=w[1];(0,o.useEffect)((function(){var e=function(){var e=(0,d.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.get("http://localhost:3000/feedbacks?campId=".concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error fetching feedback data for campId ".concat(t,":"),e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),t=function(){var t=(0,d.Z)((0,i.Z)().mark((function t(){var n,r,o;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(j&&j.length>0)){t.next=10;break}return n=j.map((function(t){return e(t.id)})),t.next=4,Promise.all(n);case 4:r=t.sent,o=j.map((function(e,t){var n=(r[t]||[]).map((function(e){return e.totalScore})),o=n.reduce((function(e,t){return e+t}),0),s=n.length>0?(o/(5*n.length)).toFixed(1):0,l=n.length;return(0,a.Z)((0,a.Z)({},e),{},{totalScore:o,totalAverageScore:s,scoreNum:l})})),console.log(o),_(o),t.next=11;break;case 10:j&&_([]);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[t]);var Z=function(e){for(var t=Math.floor(e),n=e-t>=.5,r=5-t-(n?1:0),o=[],s=0;s<t;s++)o.push((0,b.jsx)("img",{className:"h-4",src:x.e$,alt:""},s));n&&o.push((0,b.jsx)("img",{className:"h-4",src:x.uQ,alt:""},t));for(var l=0;l<r;l++)o.push((0,b.jsx)("img",{className:"h-4",src:x.Gr,alt:""},t+l+1));return o};return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{className:"row",children:k?null===k||void 0===k?void 0:k.map((function(e,t){return(0,b.jsx)("div",{className:"col-12 md:col-6 xl:col-4 2xl:col-3 mb-4",children:(0,b.jsxs)("div",{className:"relative bg-white h-full",onClick:function(){},children:[(0,b.jsx)(u.rU,{to:"/page/".concat(e.id),children:(0,b.jsxs)("div",{children:[null!==e&&void 0!==e&&e.showLogo?(0,b.jsx)("img",{className:"hover:opacity-80 h-[250px] min-h-[200px] w-full object-cover",src:n(6098)("./".concat(e.showLogo)),alt:""}):(0,b.jsx)("img",{className:"hover:opacity-80 h-[250px] min-h-[200px] w-full object-cover",src:n(7984),alt:""}),(0,b.jsxs)("div",{className:" text-gray-900 min-h-[30px] text-left px-6 py-5",children:[(0,b.jsxs)("div",{className:"row items-center py-2",children:[(0,b.jsx)("div",{className:"col-12 p-0",children:(0,b.jsx)("h5",{className:"font-bold tracking-wider text-xl",children:e.name})}),(0,b.jsxs)("div",{className:"col-12 p-0",children:[(0,b.jsx)("div",{className:"flex items-center justify-end w-full",children:(0,b.jsxs)("div",{className:"text-md flex items-center font-bold",children:[(0,b.jsx)("strong",{className:"text-xl px-2",children:void 0!==e.totalAverageScore?e.totalAverageScore:"No data"}),Z(e.totalAverageScore)]})}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsx)("span",{className:"text-sm font-bold",children:0===e.scoreNum?"(\u7121\u8cc7\u6599)":"(".concat(e.scoreNum,"\u7b46)")})})]})]}),(0,b.jsxs)("p",{children:[(0,b.jsx)(p.G,{icon:h.FGq,className:"mr-2"}),(0,b.jsxs)("strong",{className:"",children:["\u5730\u9ede\uff1a",e.address]})]}),(0,b.jsxs)("div",{className:"text-left py-2 flex flex-wrap",children:[e.tag["\u5c0f\u6728\u5c4b\u71df\u5340\u985e"]&&(0,b.jsx)("span",{className:"mr-1 mt-2 rounded-xl bg-psub_color py-1 px-2.5 text-sm font-bold text-my-green",children:"\u5c0f\u6728\u5c4b\u71df\u5340\u985e"}),e.tag["\u9732\u71df\u8eca\u71df\u5340\u985e"]&&(0,b.jsx)("span",{className:"mr-1 mt-2 rounded-xl bg-psub_color py-1 px-2.5 text-sm font-bold text-my-green",children:"\u9732\u71df\u8eca\u71df\u5340\u985e"}),e.tag["\u5176\u4ed6\u906e\u853d\u5efa\u7269"]&&(0,b.jsx)("span",{className:"mr-1 mt-2 rounded-xl bg-psub_color py-1 px-2.5 text-sm font-bold text-my-green",children:"\u5176\u4ed6\u906e\u853d\u5efa\u7269"}),e.tag["\u50c5\u63d0\u4f9b\u71df\u5730\u985e"]&&(0,b.jsx)("span",{className:"mr-1 mt-2 rounded-xl bg-psub_color py-1 px-2.5 text-sm font-bold text-my-green",children:"\u50c5\u63d0\u4f9b\u71df\u5730\u985e"}),e.tag["\u76e5\u6d17\u6dcb\u6d74\u8a2d\u65bd"]&&(0,b.jsx)("span",{className:"mr-1 mt-2 rounded-xl bg-psub_color py-1 px-2.5 text-sm font-bold text-my-green",children:"\u76e5\u6d17\u6dcb\u6d74\u8a2d\u65bd"}),e.tag["\u904a\u6a02\u5668\u6750\u8a2d\u65bd"]&&(0,b.jsx)("span",{className:"mr-1 mt-2 rounded-xl bg-psub_color py-1 px-2.5 text-sm font-bold text-my-green",children:"\u904a\u6a02\u5668\u6750\u8a2d\u65bd"}),e.tag["\u63d0\u4f9b\u79df\u501f\u88dd\u5099"]&&(0,b.jsx)("span",{className:"mr-1 mt-2 rounded-xl bg-psub_color py-1 px-2.5 text-sm font-bold text-my-green",children:"\u63d0\u4f9b\u79df\u501f\u88dd\u5099"}),e.tag["\u4f9b\u65e9\u6216\u665a\u9910\u9ede"]&&(0,b.jsx)("span",{className:"mr-1 mt-2 rounded-xl bg-psub_color py-1 px-2.5 text-sm font-bold text-my-green",children:"\u4f9b\u65e9\u6216\u665a\u9910\u9ede"}),e.tag["\u4f9b\u5c0e\u89bd\u6216\u6d3b\u52d5"]&&(0,b.jsx)("span",{className:"mr-1 mt-2 rounded-xl bg-psub_color py-1 px-2.5 text-sm font-bold text-my-green",children:"\u4f9b\u5c0e\u89bd\u6216\u6d3b\u52d5"}),e.tag["\u6232\u6c34\u5340"]&&(0,b.jsx)("span",{className:"mr-1 mt-2 rounded-xl bg-psub_color py-1 px-2.5 text-sm font-bold text-my-green",children:"\u6232\u6c34\u5340"}),e.tag["\u53ef\u6ce1\u6e6f"]&&(0,b.jsx)("span",{className:"mr-1 mt-2 rounded-xl bg-psub_color py-1 px-2.5 text-sm font-bold text-my-green",children:"\u53ef\u6ce1\u6e6f"}),e.tag["\u906e\u96e8\u68da"]&&(0,b.jsx)("span",{className:"mr-1 mt-2 rounded-xl bg-psub_color py-1 px-2.5 text-sm font-bold text-my-green",children:"\u906e\u96e8\u68da"}),e.tag["\u505c\u8eca\u4f4d"]&&(0,b.jsx)("span",{className:"mr-1 mt-2 rounded-xl bg-psub_color py-1 px-2.5 text-sm font-bold text-my-green",children:"\u505c\u8eca\u4f4d"}),e.tag["\u9ad8\u6d77\u62d4"]&&(0,b.jsx)("span",{className:"mr-1 mt-2 rounded-xl bg-psub_color py-1 px-2.5 text-sm font-bold text-my-green",children:"\u9ad8\u6d77\u62d4"}),e.tag["\u68ee\u6797\u5167"]&&(0,b.jsx)("span",{className:"mr-1 mt-2 rounded-xl bg-psub_color py-1 px-2.5 text-sm font-bold text-my-green",children:"\u68ee\u6797\u5167"}),e.tag["\u5927\u8349\u76ae"]&&(0,b.jsx)("span",{className:"mr-1 mt-2 rounded-xl bg-psub_color py-1 px-2.5 text-sm font-bold text-my-green",children:"\u5927\u8349\u76ae"}),e.tag["\u8fd1\u6eaa\u6d41"]&&(0,b.jsx)("span",{className:"mr-1 mt-2 rounded-xl bg-psub_color py-1 px-2.5 text-sm font-bold text-my-green",children:"\u8fd1\u6eaa\u6d41"}),e.tag["\u89c0\u96f2\u6d77"]&&(0,b.jsx)("span",{className:"mr-1 mt-2 rounded-xl bg-psub_color py-1 px-2.5 text-sm font-bold text-my-green",children:"\u89c0\u96f2\u6d77"}),e.tag["\u770b\u65e5\u51fa"]&&(0,b.jsx)("span",{className:"mr-1 mt-2 rounded-xl bg-psub_color py-1 px-2.5 text-sm font-bold text-my-green",children:"\u770b\u65e5\u51fa"})]})]})]})}),(0,b.jsx)("div",{className:"rounded-full bg-gray-200 w-9 h-9 flex justify-center items-center absolute top-2 right-2 z-10",onClick:function(t){return function(e,t){if(t.preventDefault(),console.log(e),v.includes(e)){var n=v.filter((function(t){return t!==e}));c.Z.patch("http://localhost:3000/users/".concat(y),{like:n}).then((function(e){console.log("\u559c\u6b61\u7684\u71df\u5340\u5df2\u66f4\u65b0",e.data),f().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",f().stopTimer),e.addEventListener("mouseleave",f().resumeTimer)}}).fire({icon:"info",title:"\u5df2\u5f9e\u6536\u85cf\u6e05\u55ae\u4e2d\u79fb\u9664"}),g(!l)})).catch((function(e){console.log("\u66f4\u65b0\u559c\u6b61\u7684\u71df\u5340\u6642\u767c\u751f\u932f\u8aa4",e)}))}else{var r=[].concat((0,m.Z)(v),[e]);c.Z.patch("http://localhost:3000/users/".concat(y),{like:r}).then((function(e){console.log("\u559c\u6b61\u7684\u71df\u5340\u5df2\u66f4\u65b0",e.data),f().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",f().stopTimer),e.addEventListener("mouseleave",f().resumeTimer)}}).fire({icon:"info",title:"\u5df2\u5c07\u6b64\u52a0\u5165\u6536\u85cf\u6e05\u55ae"}),g(!l)})).catch((function(e){console.log("\u66f4\u65b0\u559c\u6b61\u7684\u71df\u5340\u6642\u767c\u751f\u932f\u8aa4",e)}))}}(e.id,t)},children:(0,b.jsx)(p.G,{icon:h.xVw,className:"text-lg text-my_yellow",style:{cursor:"pointer"}})})]})},t)})):null})})};var y=function(){var e=(0,o.useState)(0),t=(0,r.Z)(e,2),n=t[0],a=t[1],i=function(e){a(e)},d=(0,o.useState)(!0),m=(0,r.Z)(d,2),u=m[0],x=m[1],p=(0,o.useState)([]),h=(0,r.Z)(p,2),g=h[0],f=h[1],y=localStorage.getItem("id");console.log(y);var j=function(){var e=(0,o.useState)(null),t=(0,r.Z)(e,2),n=t[0],s=t[1];return(0,o.useEffect)((function(){c.Z.get("http://localhost:3000/users/".concat(y)).then((function(e){var t=e.data;if(console.log(t),t&&t.name&&t.like){var n=t.like;return f(n),n}console.log("Something is not available")})).then((function(e){console.log(e),c.Z.get("http://localhost:3000/camps").then((function(t){var n=t.data,r=null===n||void 0===n?void 0:n.filter((function(t){return e.includes(t.id)}));console.log(r),s(r)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}),[u]),n}();return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(s.iY,{className:"py-5 ",children:[(0,b.jsxs)("div",{className:"h-[100px]",children:[(0,b.jsx)("button",{className:"border border-sub_color rounded-sm py-2 px-3 text-md font-semibold hover:bg-p_color hover:text-white ".concat(1===n&&"bg-my_green text-white"),onClick:function(){return i(1)},children:"\u5317\u90e8\u71df\u5340"}),(0,b.jsx)("button",{className:"border border-sub_color rounded-sm py-2 px-3 text-md font-semibold hover:bg-p_color hover:text-white ".concat(2===n&&"bg-my_green text-white"),onClick:function(){return i(2)},children:"\u4e2d\u90e8\u71df\u5340"}),(0,b.jsx)("button",{className:"border border-sub_color rounded-sm py-2 px-3 text-md font-semibold hover:bg-p_color hover:text-white ".concat(3===n&&"bg-my_green text-white"),onClick:function(){return i(3)},children:"\u5357\u90e8\u71df\u5340"}),(0,b.jsx)("button",{className:"border border-sub_color rounded-sm py-2 px-3 text-md font-semibold hover:bg-p_color hover:text-white ".concat(4===n&&"bg-my_green text-white"),onClick:function(){return i(4)},children:"\u6771\u90e8\u71df\u5340"}),(0,b.jsx)("button",{className:"border border-sub_color rounded-sm py-2 px-3 text-md font-semibold hover:bg-p_color hover:text-white ".concat(5===n&&"bg-my_green text-white"),onClick:function(){return i(5)},children:"\u5916\u5cf6\u71df\u5340"})]}),(0,b.jsxs)("div",{children:[0===n&&(0,b.jsxs)("div",{className:"py-10 px-3",children:[(0,b.jsx)("h3",{className:"mb-3 font-bold text-xl text-my_green",style:{letterSpacing:1},children:"\u8acb\u9078\u64c7\u4e00\u500b\u60f3\u67e5\u770b\u7684\u7d00\u9304"}),(0,b.jsx)("img",{className:"mx-auto rounded-[40px]",src:l.jU,alt:""})]}),1===n&&(0,b.jsx)(v,{sortItem:j,num:1,conCollect:u,setCollect:x,likeArray:g,userId:y}),2===n&&(0,b.jsx)(v,{sortItem:j,num:2,conCollect:u,setCollect:x,likeArray:g,userId:y}),3===n&&(0,b.jsx)(v,{sortItem:j,num:3,conCollect:u,setCollect:x,likeArray:g,userId:y}),4===n&&(0,b.jsx)(v,{sortItem:j,num:4,conCollect:u,setCollect:x,likeArray:g,userId:y}),5===n&&(0,b.jsx)(v,{sortItem:j,num:5,conCollect:u,setCollect:x,likeArray:g,userId:y})]})]})})}},9414:function(e,t,n){n.d(t,{iY:function(){return i},vK:function(){return d},w2:function(){return m}});var r,o,s,l=n(168),c=n(6444),a=n(9342),i=c.ZP.div(r||(r=(0,l.Z)(["\n  // min-height: 95%;\n  // width: 90%;\n  // margin: 0 auto;\n\n  min-height: 85vh;\n  width: 100%;\n  height: auto;\n  background-image: url(",");\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position: center;\n  background-attachment: fixed;\n"])),a.hC),d=c.ZP.div(o||(o=(0,l.Z)(["\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 40%;\n\n  @media (max-width: 1535px) {\n    width: 50%;\n  }\n\n  @media (max-width: 1279px) {\n    width: 60%;\n  }\n\n  @media (max-width: 1023px) {\n    width: 70%;\n  }\n\n  @media (max-width: 767px) {\n    width: 90%;\n  }\n\n  @media (max-width: 639px) {\n    width: 100vw;\n  }\n"]))),m=c.ZP.div(s||(s=(0,l.Z)(["\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  // min-width: 1366px;\n  min-height: 768px;\n  z-index: 10; \n  width: 100vw;\n  height: 100vh;\n  backdrop-filter: blur(3px);\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 84px 128px;\n"])))},9822:function(e,t,n){n.d(t,{Jb:function(){return s},jU:function(){return o},Fm:function(){return r}});var r=n.p+"static/media/camporder.c1f00974f719638c8f89.png",o=n.p+"static/media/camplike.bd9842ae703d21c4994e.png",s=n.p+"static/media/campempty.811e12f542bd6e6a4b6d.png"}}]);
//# sourceMappingURL=936.f3464ebc.chunk.js.map