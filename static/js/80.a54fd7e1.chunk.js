"use strict";(self.webpackChunkreactapp=self.webpackChunkreactapp||[]).push([[80],{1080:function(e,t,r){r.r(t);var n=r(1413),a=r(4165),c=r(5861),s=r(9439),o=r(2791),u=r(9414),l=r(9916),p=r(1243),i=r(184);t.default=function(){var e=localStorage.getItem("id");console.log(e);var t=(0,o.useState)(!1),r=(0,s.Z)(t,2),f=r[0],d=r[1],h=(0,o.useState)([]),x=(0,s.Z)(h,2),m=x[0],v=x[1];return(0,o.useEffect)((function(){var t=function(){var t=(0,c.Z)((0,a.Z)().mark((function t(){var r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.Z.get("http://localhost:3000/orders?userId=".concat(e,"&orderExpired=false&orderCancel=false&_expand=camp&_expand=campinfo"));case 3:r=t.sent,v(r.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error fetching camp data:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),r=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.Z.get("http://localhost:3000/feedbacks?campId=".concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error fetching feedback data for campId ".concat(t,":"),e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var t,c,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(m&&m.length>0)){e.next=8;break}return t=m.map((function(e){return r(e.campId)})),e.next=4,Promise.all(t);case 4:c=e.sent,s=m.map((function(e,t){var r=(c[t]||[]).map((function(e){return e.totalScore})),a=r.reduce((function(e,t){return e+t}),0),s=r.length>0?(a/(5*r.length)).toFixed(1):0,o=r.length;return(0,n.Z)((0,n.Z)({},e),{},{totalScore:a,totalAverageScore:s,scoreNum:o})})),console.log(s),v(s);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t(),s()}),[f]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(u.iY,{className:"py-5",children:[(0,i.jsxs)("div",{className:"h-[70px]",children:[(0,i.jsxs)("h2",{className:"text-xl font-bold",children:["\u6b61\u8fce\uff0c\u60a8\u5c1a\u6709 ",(0,i.jsx)("span",{className:"text-blue-500",children:m&&m.length})," \u7b46 \u884c\u7a0b\u5f85\u9032\u884c\u6216\u9032\u884c\u4e2d"]}),(0,i.jsx)("strong",{children:"\u6e96\u5099\u597d\u958b\u59cb\u60a8\u7684\u884c\u7a0b\u4e86\u55ce"})]}),(0,i.jsx)(l.Z,{getdata:m,status:"ing",reGetCon:f,setReGetCon:d})]})})}}}]);
//# sourceMappingURL=80.a54fd7e1.chunk.js.map