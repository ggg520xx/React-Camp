"use strict";(self.webpackChunkreactapp=self.webpackChunkreactapp||[]).push([[81],{6081:function(e,t,r){r.r(t);var n=r(1413),a=r(4165),c=r(5861),o=r(9439),u=r(2791),s=r(9414),l=r(9916),i=r(1243),p=r(9822),d=r(184);t.default=function(){var e=(0,u.useState)(null),t=(0,o.Z)(e,2),r=t[0],f=t[1],h=(0,u.useState)(!1),m=(0,o.Z)(h,2),x=m[0],g=m[1],v=localStorage.getItem("id");console.log(v);var b=(0,u.useState)(!1),Z=(0,o.Z)(b,2),k=Z[0],w=Z[1],S=(0,u.useState)([]),y=(0,o.Z)(S,2),_=y[0],j=y[1],C=(0,u.useState)(!1),I=(0,o.Z)(C,2),N=I[0],E=I[1];(0,u.useEffect)((function(){i.Z.get("http://localhost:3000/orders?userId=".concat(v,"&orderExpired=true&orderCancel=false&_expand=camp&_expand=campinfo")).then((function(e){var t=e.data.sort((function(e,t){return t.id-e.id}));console.log(t),j(t),E(!N)})).catch((function(e){console.log(e)}))}),[x]),(0,u.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.get("http://localhost:3000/feedbacks?campId=".concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error fetching feedback data for campId ".concat(t,":"),e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),t=function(){var t=(0,c.Z)((0,a.Z)().mark((function t(){var r,c,o;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(_&&_.length>0)){t.next=8;break}return r=_.map((function(t){return e(t.campId)})),t.next=4,Promise.all(r);case 4:c=t.sent,o=_.map((function(e,t){var r=(c[t]||[]).map((function(e){return e.totalScore})),a=r.reduce((function(e,t){return e+t}),0),o=r.length>0?(a/(5*r.length)).toFixed(1):0,u=r.length;return(0,n.Z)((0,n.Z)({},e),{},{totalScore:a,totalAverageScore:o,scoreNum:u})})),console.log(o),j(o);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[k,N]);var F=(0,u.useState)([]),G=(0,o.Z)(F,2),R=G[0],A=G[1];return(0,u.useEffect)((function(){i.Z.get("http://localhost:3000/orders?userId=".concat(v,"&orderCancel=true&_expand=camp&_expand=campinfo")).then((function(e){var t=e.data.sort((function(e,t){return t.id-e.id}));console.log(t),A(t)})).catch((function(e){console.log(e)}))}),[]),(0,u.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.get("http://localhost:3000/feedbacks?campId=".concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error fetching feedback data for campId ".concat(t,":"),e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),t=function(){var t=(0,c.Z)((0,a.Z)().mark((function t(){var r,c,o;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(R&&R.length>0)){t.next=8;break}return r=R.map((function(t){return e(t.campId)})),t.next=4,Promise.all(r);case 4:c=t.sent,o=R.map((function(e,t){var r=(c[t]||[]).map((function(e){return e.totalScore})),a=r.reduce((function(e,t){return e+t}),0),o=r.length>0?(a/(5*r.length)).toFixed(1):0,u=r.length;return(0,n.Z)((0,n.Z)({},e),{},{totalScore:a,totalAverageScore:o,scoreNum:u})})),console.log(o),A(o);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[k]),(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(s.iY,{className:"py-5",children:[(0,d.jsxs)("div",{className:"h-[70px]",children:[(0,d.jsx)("button",{onClick:function(){return f(!0)},className:"border border-sub_color rounded-sm py-2 px-3 text-md font-semibold hover:bg-p_color hover:text-white ".concat(r&&"bg-my_green text-white"),children:"\u904e\u53bb\u5b8c\u6210\u8a18\u9304"}),(0,d.jsx)("button",{onClick:function(){return f(!1)},className:"border border-sub_color rounded-sm py-2 px-3 text-md font-semibold hover:bg-p_color hover:text-white ".concat(!1===r&&"bg-my_green text-white"),children:"\u53d6\u6d88\u8a02\u55ae\u8a18\u9304"})]}),null===r&&(0,d.jsxs)("div",{className:"py-10",children:[(0,d.jsx)("h3",{className:"mb-3 font-bold text-xl text-my_green",style:{letterSpacing:1},children:"\u8acb\u9078\u64c7\u4e00\u500b\u60f3\u67e5\u770b\u7684\u7d00\u9304 \uff08\u8fd1\u671f\u8a02\u55ae\u6703\u5448\u73fe\u65bc\u6700\u4e0a\u65b9\uff09"}),(0,d.jsx)("img",{className:"mx-auto rounded-[40px]",src:p.Fm,alt:""})]}),!0===r&&(0,d.jsx)(l.Z,{getdata:_,status:"past",reGetCon:k,setReGetCon:w,reGetFeedback:x,setReGetFeedback:g,userId:v}),!1===r&&(0,d.jsx)(l.Z,{getdata:R,status:"cancel",reGetCon:k,setReGetCon:w})]})})}}}]);
//# sourceMappingURL=81.433288c4.chunk.js.map