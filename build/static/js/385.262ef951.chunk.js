"use strict";(self.webpackChunkreactapp=self.webpackChunkreactapp||[]).push([[385],{6385:function(e,s,t){t.r(s),t.d(s,{default:function(){return p}});var a=t(1413),r=t(2791),l=t(9806),n=t(1632),c=t(7689),i=t(1087),o=t(1134),d=t(1243),m=t(894),x=t(184),p=function(e){var s,t,p,g,u=(0,m.y)(m.n),h=u.loginStatus,j=u.setLoginStatus,v=(0,c.s0)(),f=(0,o.cI)(),N=f.watch,y=f.register,b=f.handleSubmit,_=f.formState.errors;(0,r.useEffect)((function(){!0!==h||v("/")}),[]);var w=N("register_password");return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:"h-screen container relative",children:(0,x.jsx)("div",{className:"h-full flex justify-center items-center",children:(0,x.jsxs)("div",{className:"bg-soft_color w-7/12 p-0 rounded shadow-lg py-5  ",children:[(0,x.jsxs)("div",{className:"py-5",children:[(0,x.jsx)("h2",{className:"font-bold text-xl text-my_green",style:{letterSpacing:1},children:"\u6703\u54e1\u8a3b\u518a"}),(0,x.jsx)("p",{className:"mt-3 font-bold text-sm text-red-400",children:"\u9996\u6b21\u8a3b\u518a\u6210\u529f\u9001\u516d\u6298\u512a\u60e0\u5238"})]}),(0,x.jsx)("hr",{className:"bg-my_green h-[1px] w-8/12 mx-auto",style:{border:"none"}}),(0,x.jsx)("div",{className:"py-5",children:(0,x.jsxs)("form",{onSubmit:b((function(e){console.log(e);var s=JSON.stringify(e);console.log(s),d.Z.post("http://localhost:3000/users",{name:"".concat(e.register_name),nickname:"".concat(e.register_nickname),email:"".concat(e.register_email),password:"".concat(e.register_checkpassword),discount:[.6]}).then((function(e){if(console.log(e.data),console.log(e.data.accessToken),console.log(e.data.user),localStorage.setItem("token",e.data.accessToken),localStorage.setItem("name",e.data.user.name),localStorage.setItem("nickname",e.data.user.nickname),localStorage.setItem("id",e.data.user.id),localStorage.getItem("prevpage")){j(!0);var s=localStorage.getItem("prevpage");alert("\u8a3b\u518a\u6210\u529f,\u5c07\u5c0e\u5411\u81f3\u5148\u524d\u9801\u9762"),v("/page/".concat(s)),localStorage.removeItem("prevpage")}else j(!0),alert("\u8a3b\u518a\u6210\u529f,\u5c07\u5c0e\u5411\u81f3\u6703\u54e1\u9801\u9762"),v("/member")})).catch((function(e){console.log(e.response),alert("\u8a3b\u518a\u5931\u6557\uff1a".concat(e.response.data))}))})),children:[(0,x.jsxs)("div",{className:"flex  justify-center py-2",children:[(0,x.jsx)("div",{className:"flex items-center px-5 bg-sub_color",children:(0,x.jsx)(l.G,{icon:n.ILF,className:" text-white"})}),(0,x.jsx)("div",{children:(0,x.jsx)("input",(0,a.Z)((0,a.Z)({className:"border-transparent",type:"text",placeholder:"\u8acb\u8f38\u5165\u59d3\u540d"},y("register_name",{required:{value:!0,message:"\u6b64\u6b04\u4f4d\u5fc5\u586b\u5beb"},pattern:{value:/^(?!\s)([\u4e00-\u9fa5]{2,16}|[a-zA-Z]{2,16})(?!\s)$/g,message:"\u4e0d\u53ef\u6df7\u7528\u4e4b\u4e2d\u6587\u6216\u82f1\u6587\uff0c2-16\u5b57\uff0c\u4e0d\u53ef\u5e36\u7a7a\u683c\u53ca\u7b26\u865f"}})),{},{style:{letterSpacing:1}}))})]}),(0,x.jsx)("div",{className:"min-h-[20px] font-semibold text-sm text-red-500",children:null===(s=_.register_name)||void 0===s?void 0:s.message}),(0,x.jsxs)("div",{className:"flex justify-center py-2",children:[(0,x.jsx)("div",{className:"flex items-center px-5 bg-sub_color",children:(0,x.jsx)(l.G,{icon:n.vym,className:" text-white"})}),(0,x.jsx)("div",{children:(0,x.jsx)("input",(0,a.Z)((0,a.Z)({className:"border-transparent",type:"text",placeholder:"\u8acb\u8f38\u5165\u66b1\u7a31"},y("register_nickname",{required:{value:!0,message:"\u6b64\u6b04\u4f4d\u5fc5\u586b\u5beb"},pattern:{value:/^(?!\s)([\u4e00-\u9fa5]{2,10}|[a-zA-Z]{2,10})(?!\s)$/g,message:"\u4e0d\u53ef\u6df7\u7528\u4e4b\u4e2d\u6587\u6216\u82f1\u6587\uff0c2-10\u5b57\uff0c\u4e0d\u53ef\u5e36\u7a7a\u683c\u53ca\u7b26\u865f"}})),{},{style:{letterSpacing:1}}))})]}),(0,x.jsx)("div",{className:"min-h-[20px] font-semibold text-sm text-red-500",children:null===(t=_.register_nickname)||void 0===t?void 0:t.message}),(0,x.jsxs)("div",{className:"flex justify-center py-2",children:[(0,x.jsx)("div",{className:"flex items-center px-5 bg-sub_color",children:(0,x.jsx)(l.G,{icon:n.FU$,className:" text-white"})}),(0,x.jsx)("div",{children:(0,x.jsx)("input",(0,a.Z)((0,a.Z)({className:"border-transparent",type:"text",placeholder:"\u8acb\u8f38\u5165\u4fe1\u7bb1"},y("register_email",{required:{value:!0,message:"\u6b64\u6b04\u4f4d\u5fc5\u586b\u5beb"},pattern:{value:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g,message:"Email \u4e0d\u5408\u898f\u5247"}})),{},{style:{letterSpacing:1}}))})]}),(0,x.jsx)("div",{className:"min-h-[20px] font-semibold text-sm text-red-500",children:null===(p=_.register_email)||void 0===p?void 0:p.message}),(0,x.jsxs)("div",{className:"flex justify-center py-2",children:[(0,x.jsx)("div",{className:"flex items-center px-5 bg-sub_color",children:(0,x.jsx)(l.G,{icon:n.DD4,className:" text-white"})}),(0,x.jsx)("div",{children:(0,x.jsx)("input",(0,a.Z)((0,a.Z)({id:"input_password",className:"border-transparent",type:"password",placeholder:"\u8acb\u8f38\u5165\u5bc6\u78bc"},y("register_password",{required:{value:!0,message:"\u6b64\u6b04\u4f4d\u5fc5\u586b\u5beb"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,16}$/g,message:"\u5bc6\u78bc 8-16\u5b57\uff0c\u81f3\u5c111\u5927\u5beb\u5b57\u6bcd\uff0c1\u5c0f\u5beb\u5b57\u6bcd\uff0c1\u6578\u5b57"}})),{},{style:{letterSpacing:1}}))})]}),(0,x.jsx)("div",{className:"min-h-[20px] font-semibold text-sm text-red-500",children:null===(g=_.register_password)||void 0===g?void 0:g.message}),(0,x.jsxs)("div",{className:"flex justify-center py-2",children:[(0,x.jsx)("div",{className:"flex items-center px-5 bg-sub_color",children:(0,x.jsx)(l.G,{icon:n.FFp,className:" text-white"})}),(0,x.jsx)("div",{children:(0,x.jsx)("input",(0,a.Z)((0,a.Z)({id:"input_repassword",className:"border-transparent",type:"password",placeholder:"\u518d\u78ba\u8a8d\u5bc6\u78bc"},y("register_checkpassword",{required:!0,maxLength:20,validate:function(e){return e===w}})),{},{style:{letterSpacing:1}}))})]}),(0,x.jsx)("div",{className:"min-h-[20px] font-semibold text-sm text-red-500",children:_.register_checkpassword&&(0,x.jsx)("span",{children:"\u5bc6\u78bc\u4e0d\u76f8\u7b26"})}),(0,x.jsx)("div",{className:"flex justify-center py-5",children:(0,x.jsx)("button",{type:"",className:"font-bold text-my_green button_effect",onClick:function(){console.log("\u8a3b\u518a")},style:{fontSize:18},children:"\u8a3b \u518a"})}),(0,x.jsx)("hr",{className:"bg-my_green h-[1px] w-8/12 mx-auto",style:{border:"none"}}),(0,x.jsxs)("div",{className:"flex justify-center py-5",children:[(0,x.jsxs)("strong",{className:"",children:["\u6309\u932f\u4e86",(0,x.jsx)("span",{className:"text-sub_color mx-1",children:"\u6211\u8981\u56de\u524d\u9801"}),"\u963f\uff01"]}),(0,x.jsx)("div",{className:"px-3",children:(0,x.jsxs)(i.rU,{to:"/login",className:"text-sub_color hover:text-my_green font-bold",children:["\u73fe\u5728\u53bb\u767b\u5165",(0,x.jsx)(l.G,{icon:n.I4f,className:" text-black"})]})})]})]})})]})})})})}}}]);
//# sourceMappingURL=385.262ef951.chunk.js.map