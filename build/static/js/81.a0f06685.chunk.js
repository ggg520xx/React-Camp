"use strict";(self.webpackChunkreactapp=self.webpackChunkreactapp||[]).push([[81],{6081:function(e,t,r){r.r(t);var n=r(1413),a=r(4165),c=r(5861),o=r(9439),u=r(2791),s=r(9414),l=r(9916),i=r(1243),d=r(9822),p=r(184);t.default=function(){var e=localStorage.getItem("id");console.log(e);var t=(0,u.useState)(null),r=(0,o.Z)(t,2),f=r[0],h=r[1],m=(0,u.useState)(!1),x=(0,o.Z)(m,2),g=x[0],v=x[1],b=(0,u.useState)(!1),Z=(0,o.Z)(b,2),k=Z[0],S=Z[1],y=(0,u.useState)([]),w=(0,o.Z)(y,2),_=w[0],j=w[1],I=(0,u.useState)(!1),N=(0,o.Z)(I,2),E=N[0],C=N[1];(0,u.useEffect)((function(){i.Z.get("http://localhost:3000/orders?userId=".concat(e,"&orderExpired=true&orderCancel=false&_expand=camp&_expand=campinfo")).then((function(e){var t=e.data.sort((function(e,t){return t.id-e.id}));console.log(t),j(t),C(!E)})).catch((function(e){console.log(e)}))}),[g]),(0,u.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.get("http://localhost:3000/feedbacks?campId=".concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error fetching feedback data for campId ".concat(t,":"),e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),t=function(){var t=(0,c.Z)((0,a.Z)().mark((function t(){var r,c,o;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(_&&_.length>0)){t.next=8;break}return r=_.map((function(t){return e(t.campId)})),t.next=4,Promise.all(r);case 4:c=t.sent,o=_.map((function(e,t){var r=(c[t]||[]).map((function(e){return e.totalScore})),a=r.reduce((function(e,t){return e+t}),0),o=r.length>0?(a/(5*r.length)).toFixed(1):0,u=r.length;return(0,n.Z)((0,n.Z)({},e),{},{totalScore:a,totalAverageScore:o,scoreNum:u})})),console.log(o),j(o);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[k,E]);var F=(0,u.useState)([]),G=(0,o.Z)(F,2),A=G[0],D=G[1];return(0,u.useEffect)((function(){i.Z.get("http://localhost:3000/orders?userId=".concat(e,"&orderCancel=true&_expand=camp&_expand=campinfo")).then((function(e){var t=e.data.sort((function(e,t){return t.id-e.id}));console.log(t),D(t)})).catch((function(e){console.log(e)}))}),[]),(0,u.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.get("http://localhost:3000/feedbacks?campId=".concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error fetching feedback data for campId ".concat(t,":"),e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),t=function(){var t=(0,c.Z)((0,a.Z)().mark((function t(){var r,c,o;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(A&&A.length>0)){t.next=8;break}return r=A.map((function(t){return e(t.campId)})),t.next=4,Promise.all(r);case 4:c=t.sent,o=A.map((function(e,t){var r=(c[t]||[]).map((function(e){return e.totalScore})),a=r.reduce((function(e,t){return e+t}),0),o=r.length>0?(a/(5*r.length)).toFixed(1):0,u=r.length;return(0,n.Z)((0,n.Z)({},e),{},{totalScore:a,totalAverageScore:o,scoreNum:u})})),console.log(o),D(o);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[k]),(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(s.iY,{className:"py-5",children:[(0,p.jsxs)("div",{className:"h-[100px]",children:[(0,p.jsx)("button",{onClick:function(){return h(!0)},className:"border border-sub_color rounded-sm py-2 px-3 text-md font-semibold hover:bg-p_color hover:text-white ".concat(f&&"bg-my_green text-white"),children:"\u904e\u53bb\u5b8c\u6210\u8a18\u9304"}),(0,p.jsx)("button",{onClick:function(){return h(!1)},className:"border border-sub_color rounded-sm py-2 px-3 text-md font-semibold hover:bg-p_color hover:text-white ".concat(!1===f&&"bg-my_green text-white"),children:"\u53d6\u6d88\u8a02\u55ae\u8a18\u9304"})]}),null===f&&(0,p.jsxs)("div",{className:"py-10 px-3",children:[(0,p.jsx)("h3",{className:"mb-3 font-bold text-xl text-my_green",style:{letterSpacing:1},children:"\u8acb\u9078\u64c7\u4e00\u500b\u60f3\u67e5\u770b\u7684\u7d00\u9304 \uff08\u8fd1\u671f\u8a02\u55ae\u6703\u5448\u73fe\u65bc\u6700\u4e0a\u65b9\uff09"}),(0,p.jsx)("img",{className:"mx-auto rounded-[40px]",src:d.Fm,alt:""})]}),!0===f&&(0,p.jsx)(l.Z,{getdata:_,status:"past",delayGetStar:k,setDelayGetStar:S,reGetFeedback:g,setReGetFeedback:v,userId:e}),!1===f&&(0,p.jsx)(l.Z,{getdata:A,status:"cancel",delayGetStar:k,setDelayGetStar:S})]})})}}}]);
//# sourceMappingURL=81.a0f06685.chunk.js.map