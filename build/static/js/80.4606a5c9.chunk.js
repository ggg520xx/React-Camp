"use strict";(self.webpackChunkreactapp=self.webpackChunkreactapp||[]).push([[80],{1080:function(e,t,r){r.r(t);var n=r(1413),a=r(4165),c=r(5861),o=r(9439),s=r(2791),u=r(9414),l=r(9916),i=r(1243),f=r(184);t.default=function(){var e=localStorage.getItem("id");console.log(e);var t=(0,s.useState)(!1),r=(0,o.Z)(t,2),p=r[0],d=r[1],h=(0,s.useState)(!1),m=(0,o.Z)(h,2),g=m[0],x=m[1],v=(0,s.useState)([]),Z=(0,o.Z)(v,2),S=Z[0],b=Z[1],k=(0,s.useState)(!1),w=(0,o.Z)(k,2),j=w[0],y=w[1];return(0,s.useEffect)((function(){i.Z.get("http://localhost:3000/orders?userId=".concat(e,"&orderExpired=false&orderCancel=false&_expand=camp&_expand=campinfo")).then((function(e){var t=e.data;console.log(t);var r=t.sort((function(e,t){var r=new Date(e.roomStart),n=new Date(t.roomStart);return r.getTime()-n.getTime()}));b(r),y(!j)})).catch((function(e){console.log(e)}))}),[p]),(0,s.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.get("http://localhost:3000/feedbacks?campId=".concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error fetching feedback data for campId ".concat(t,":"),e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),t=function(){var t=(0,c.Z)((0,a.Z)().mark((function t(){var r,c,o;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(S&&S.length>0)){t.next=8;break}return r=S.map((function(t){return e(t.campId)})),t.next=4,Promise.all(r);case 4:c=t.sent,o=S.map((function(e,t){var r=(c[t]||[]).map((function(e){return e.totalScore})),a=r.reduce((function(e,t){return e+t}),0),o=r.length>0?(a/(5*r.length)).toFixed(1):0,s=r.length;return(0,n.Z)((0,n.Z)({},e),{},{totalScore:a,totalAverageScore:o,scoreNum:s})})),console.log(o),b(o);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[g,j]),(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(u.iY,{className:"py-5",children:[(0,f.jsxs)("div",{className:"h-[70px]",children:[(0,f.jsxs)("h2",{className:"text-xl font-bold",children:["\u6b61\u8fce\uff0c\u60a8\u5c1a\u6709 ",(0,f.jsx)("span",{className:"text-blue-500",children:S&&S.length})," \u7b46 \u884c\u7a0b\u5f85\u9032\u884c\u6216\u9032\u884c\u4e2d"]}),(0,f.jsx)("strong",{children:"\u6e96\u5099\u597d\u958b\u59cb\u60a8\u7684\u884c\u7a0b\u4e86\u55ce"})]}),(0,f.jsx)(l.Z,{getdata:S,status:"ing",delayGetStar:g,setDelayGetStar:x,cancelOrder:p,setCancelOrder:d})]})})}}}]);
//# sourceMappingURL=80.4606a5c9.chunk.js.map